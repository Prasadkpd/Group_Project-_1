<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analytics</title>
    <link rel="stylesheet" href="/Assets/css/SpArenaManager/manage-analytics.css">
    <script src="https://kit.fontawesome.com/3220c9480a.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <!-- Top Navigation Bar -->
    <nav>
        <div class="nav-left">
            <div class="logo-container">
                <a href="#">
                    <i class="fas fa-running "></i>
                    <span class="logo-name">Sportizza</span>
                </a>
            </div>
            <div class="search-bar-container">
                <input type="search" name="search" placeholder="Search">
                <i class="fas fa-search "></i>
            </div>
            <div class="nav-profile">
                <button class="openbutton" onclick="openpopupform()">
                    <div class="profile-details">
                        <img src="/Assets/images/Team members/jonathan.png" alt="" class="profile-picture">
                        <div class="username">{{current_user.first_name}}  {{current_user.last_name}}</div>
                    </div>
                </button>
            </div>
            <div class="sign-in-out-btn">
                {% if current_user %}
        <a href="/logout"> Sign Out</a>
        {% endif %}
            </div>
        </div>
        <!-- search bar for mobile -->
        <div class="search-bar-container-mobi">
            <input type="search" name="search" placeholder="Search">
            <i class="fas fa-search "></i>
        </div>
    </nav>
    <div id="myForm" class="sectionpop ">
        <div class="formsection">
            <div>
                <button s class="closebutton" onclick="closepopupform()">‚ùå</button>
            </div>
            <img class="form-profile-picture" src="/Assets/images/Team members/jonathan.png" alt="">
            <form action="/action_page.php" style="margin:20px">
                <label for="fname">First Name</label>
                <input type="text" id="fname" name="firstname" placeholder="Enter First Name" value="sadeepa">
                <label for="lname">Last Name</label>
                <input type="text" id="lname" name="lastname" placeholder="Enter Last Names" value="bhashitha">
                <label for="lname">Primary Number</label>
                <input type="text" id="lname" name="lastname" placeholder="Enter Primary Number" value="0705614640">
                <label for="lname">Secondary Number</label>
                <input type="text" id="userid" name="lastname" placeholder="Enter Secondary Number" value="0705614640">
                <input type="submit" value="Save">
            </form>
        </div>
    </div>
  
    <!-- End Top Navigation Bar -->

    <section class="page-container">

        <!-- SIDE NAVIGATION BAR - START -->
        <div class="sidebar">
            <div class="sidebar-container">
                <div class="side-menu">
                    <i class="fas fa-bars fa-2x " id="side-menu-open-btn"></i>
                    <i class="fas fa-times fa-2x" id="side-menu-close-btn"></i>
                </div>
                <ul class="side-menu-list">
                    <li>
                        <a href="#" class="side-menu-li">
                            <i class="fas fa-home"></i>
                            <p class="side-menu-item">Arena Profile</p>
                        </a>
                        <p class="side-menu-tooltip">Arena Profile</p>
                    </li>
                    <li>
                        <a href="/Sparenamanager/managebookings" class="side-menu-li">
                            <i class="fas fa-bookmark"></i>
                            <p class="side-menu-item">Manage Bookings</p>
                        </a>
                        <p class="side-menu-tooltip">Bookings</p>
                    </li>
                    <li>
                        <a href="#" class="side-menu-li">
                            <i class="fas fa-bell"></i>
                            <p class="side-menu-item">Notifications</p>
                        </a>
                        <p class="side-menu-tooltip">Notifications</p>
                    </li>
                    <li>
                        <a href="/Sparenamanager/managetimeslot" class="side-menu-li">
                            <i class="fas fa-clock"></i>
                            <p class="side-menu-item">Manage Timeslot</p>
                        </a>
                        <p class="side-menu-tooltip">Timeslot</p>
                    </li>
                    <li>
                        <a href="/Sparenamanager/managefacility" class="side-menu-li">
                            <i class="fas fa-building"></i>
                            <p class="side-menu-item">Manage Facility</p>
                        </a>
                        <p class="side-menu-tooltip">Facility</p>
                    </li>

                    <li>
                        <a href="/Sparenamanager/manageusers" class="side-menu-li">
                            <i class="fas fa-users"></i>
                            <p class="side-menu-item">Manage Users</p>
                        </a>
                        <p class="side-menu-tooltip">Manage Users</p>
                    </li>
                    <li>
                        <a href="#" class="side-menu-li">
                            <i class="fas fa-chart-bar"></i>
                            <p class="side-menu-item">Analytics</p>
                        </a>
                        <p class="side-menu-tooltip">Analytics</p>
                    </li>
                </ul>
            </div>
        </div>
        <!-- SIDE NAVIGATION BAR - END -->

        <!-- Analytics Page -->
        <div class="page-content-container" >
            <div class="container">
                
                <!--<div class="tab">
                    <button class="booking_tab tab-btn active" onclick="openTab(event, 'view_bookings')"><i class="fas fa-search"></i><p>View FAQ</p></button>
                    <button class="booking_tab tab-btn" onclick="openTab(event, 'add_bookings')"><i class="fas fa-plus"></i><p>Create FAQ</p></button>
                    <button class="booking_tab tab-btn" onclick="openTab(event, 'cancel_booking')"><i class="fas fa-times"></i><p> Delete FAQ</p></button>
                    <button class="booking_tab tab-btn" onclick="openTab(event, 'booking_payment')"><i class="fas fa-edit"></i><p>Update FAQ</p></button>
                </div>-->
                <h1 class="page-header">Analytics</h1>
                        <div class="filters">
                                    <div class="booking-table-search-container">
                                        <select style="font-family:'Poppins', sans-serif;text-align:center;">
                                            <option>Select type</option>
                                            <option>Customer data</option>
                                            <option>Sports arena data</option>
                                            <option>Booking data</option>
                                            <option>All</option>
                                        </select>
                                    </div>
                                    <div class="booking-table-date-picker" style="margin-top:5px;">
                                        <label class="date-label" style="margin:5px;">Start Date  </label>
                                        <input type="date" style="border:1px solid #d3d3d3;border-radius:25px;padding:12px 20px;">
                                    </div>
                                    <div class="booking-table-date-picker" style="margin-top:5px;">
                                        <label class="date-label">End Date</label>
                                        <input type="date" style="border:1px solid #d3d3d3;border-radius:25px;padding:12px 20px;">
                                    </div>
                        </div>
                        <div class="chart-container">
                            <div class="chart-row">
                                <div class="chart">
                                    <h5>No of Bookings</h5>
                                    <canvas id="myChart1"></canvas>
                                </div>
                                <div class="chart-pie">
                                    <h5>Bookings by payment method</h5>
                                    <canvas id="myChart2"></canvas>
                                </div>
                                </div>
                                <div class="chart-row">
                                <div class="chart">
                                    <h5>Timeslots booked per month</h5>
                                    <canvas id="myChart3"></canvas>
                                </div>
                                <div class="chart-pie">
                                    <h5>Facilities booked per month</h5>
                                    <canvas id="myChart4"></canvas>
                                </div>
                                </div>
                                
                        </div>
            
                    

            
                <input type="submit" value="Download Report" class="faqSubmit" />
                    
            
            </div>
        </div>
    </section>

    <!-- Start of Footer -->
    <footer>
        <div class="copyright">
            <p>
                Copyright &copy;2021 All rights reserved | Sportizza Inc.
            </p>
        </div>
    </footer>
    <!-- End of Footer -->
    <script type="text/javascript" src="/Assets/js/SpArenaManager/manage-analytics.js"></script>

   
   <script>
       var delayed;

       var ctx1 = document.getElementById('myChart1').getContext('2d');
        var myChart1 = new Chart(ctx1, {
            type: 'bar',
            data: {
                labels: [
                    {% for chart in chart1 %}
                        '{{chart.booking_date}}', 
                    {% endfor %}
                ],
                datasets: [{
                    label: 'No of Bookings',
                    data: [
                        {% for chart in chart1 %}
                            {{chart.No_Of_Bookings}} ,
                        {% endfor %}
                    ],
                    backgroundColor: [
                        '#ee5253'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                animation: {
                    // delay: 500, // change delay to suit your needs.
                    onComplete: () => {
                        delayed = true;
                    },
                    delay: (context) => {
                        let delay = 0;
                        if (context.type === 'data' && context.mode === 'default' && !delayed) {
                        delay = context.dataIndex * 300 + context.datasetIndex * 100;
                        }
                        return delay;
                    },
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: {
                            color: '#fff'
                        },
                        min: 0,
                        max: 5,
                        ticks: {
                            stepSize: 1
                        }
                    },
                    x: {
                        beginAtZero: true,
                        grid: {
                            color: '#fff'
                        }
                    }
                },
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                }
            },
        });
        
        var ctx2 = document.getElementById('myChart2').getContext('2d');
        var myChart2 = new Chart(ctx2, {
            type: 'doughnut',
            data: {
                labels: [
                    {% for chart in chart2 %}
                        '{{chart.payment_method}}', 
                    {% endfor %}
                ],
                datasets: [{
                    label: '# of Votes',
                    data: [
                        {% for chart in chart2 %}
                            {{chart.No_Of_Bookings}} ,
                        {% endfor %}
                    ],
                    backgroundColor: [
                        "#55E6C1",
                        "#273c75",
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                animation: {
                    // delay: 500, // change delay to suit your needs.
                    onComplete: () => {
                        delayed = true;
                    },
                    delay: (context) => {
                        let delay = 0;
                        if (context.type === 'data' && context.mode === 'default' && !delayed) {
                        delay = context.dataIndex * 300 + context.datasetIndex * 100;
                        }
                        return delay;
                    },
                },
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                }
            },
        });

        var ctx3 = document.getElementById('myChart3').getContext('2d');
        var myChart3 = new Chart(ctx3, {
            type: 'bar',
            data: {
                labels: [
                    {% for chart in chart3 %}
                        '{{chart.start_time}}', 
                    {% endfor %}
                ],
                datasets: [{
                    label: 'No of Bookings',
                    data: [
                        {% for chart in chart3 %}
                            {{chart.No_Of_Bookings}} ,
                        {% endfor %}
                    ],
                    backgroundColor: [
                        '#82589F'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                animation: {
                    // delay: 500, // change delay to suit your needs.
                    onComplete: () => {
                        delayed = true;
                    },
                    delay: (context) => {
                        let delay = 0;
                        if (context.type === 'data' && context.mode === 'default' && !delayed) {
                        delay = context.dataIndex * 300 + context.datasetIndex * 100;
                        }
                        return delay;
                    },
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: {
                            color: '#fff'
                        },
                        min: 0,
                        max: 5,
                        ticks: {
                            stepSize: 1
                        }
                    },
                    x: {
                        beginAtZero: true,
                        grid: {
                            color: '#fff'
                        }
                    }
                },
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                }
            },
        });

        var ctx4 = document.getElementById('myChart4').getContext('2d');
        var myChart4 = new Chart(ctx4, {
            type: 'pie',
            data: {
                labels: [
                    {% for chart in chart4 %}
                        '{{chart.facility_name}}', 
                    {% endfor %}
                ],
                datasets: [{
                    label: '# of Votes',
                    data: [
                        {% for chart in chart4 %}
                            {{chart.No_Of_Bookings}} ,
                        {% endfor %}
                    ],
                    backgroundColor: [
                        "#e58e26",
                        "#fad390",
                        '#fa983a',
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                animation: {
                    // delay: 500, // change delay to suit your needs.
                    onComplete: () => {
                        delayed = true;
                    },
                    delay: (context) => {
                        let delay = 0;
                        if (context.type === 'data' && context.mode === 'default' && !delayed) {
                        delay = context.dataIndex * 300 + context.datasetIndex * 100;
                        }
                        return delay;
                    },
                },
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                }
            },
        });
        

    </script>

</body>

</html>